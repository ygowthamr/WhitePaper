<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

    <link rel="icon" type="image/x-icon" href="../../static/images/favicon.png">
    <link rel="stylesheet" href="../../static/css/pass_rest.css">
    <title>Reset Password - Whitepaper</title>
    
</head>

<body>
    <header class="header">
        <button id="themeToggle" class="theme-toggle" aria-label="Toggle Theme">
            <i id="themeIcon" class="fas fa-moon"></i>
        </button>
        <div class="header-content">
            <a href="/" class="logo">
                <i class="fas fa-pen-fancy"></i> Whitepaper
            </a>
        </div>
    </header>

    <main class="main-container">
        <h1 class="form-title">
            <i class="fas fa-key"></i> Reset Password
        </h1>
        <p class="form-description">Enter your email address below, and we'll send you an OTP for resetting your password.</p>
        
        <form id="email-form">
            {% csrf_token %}
            <div class="input-group">
                <input type="email" 
                       class="input-field" 
                       name="email" 
                       placeholder="Enter your email"
                       required>
            </div>
            <button type="submit" class="btn">
                <i class="fas fa-paper-plane"></i> Send OTP
            </button>
        </form>

        <div id="otp-section">
            <h2 class="form-title">
                <i class="fas fa-shield-alt"></i> Verify OTP
            </h2>
            <p class="form-description">Enter the OTP sent to your email:</p>
            <form id="otp-form">
                {% csrf_token %}
                <input type="text" 
                       class="input-field" 
                       name="otp" 
                       placeholder="Enter OTP"
                       required>
                <button type="submit" class="btn">
                    <i class="fas fa-check-circle"></i> Verify OTP
                </button>
            </form>
        </div>
    </main>

    <footer class="footer-body">
        <div class="footer-container">
           <!---discript-->
           <div class="sec discript">
               
               <a href="/" class="logo">
                   <i class="fas fa-pen-fancy" style="padding-right:10px;"></i>Whitepaper</a>
               </a>
               <p>
                   A user-friendly notepad for creating, editing, and managing notes efficiently. It focuses on simplicity, scalability, and an intuitive experience for smooth note-taking.
               </p>
               <!--icons-->

               <ul class="social">
                   <li><a href="https://www.facebook.com/" class="icons"><i class="fa-brands fa-facebook-f"></i></a></li>
                   <li><a href="https://www.instagram.com/" class="icons"><i class="fa-brands fa-instagram"></i></a></li>
                   <li><a href="https://github.com/" class="icons"><i class="fa-brands fa-github"></i></a></li>
                   <li><a href="https://www.linkedin.com/" class="icons"><i class="fa-brands fa-linkedin"></i></a></li>
                   <li><a href="https://x.com/" class="icons"><i class="fa-brands fa-x-twitter"></i></a></li>
               </ul>
           </div>

            <!--Quick links_--->
            <div class="sec quicklinks">
               <h2>Quick Links</h2>
               <ul>
                   <li><a href="#" class="link"><i class="fa-solid fa-house" style="padding-right: 5px;"></i>Home</a>
                   </li>
                   <li><a href="#" class="link"><i class="fa-solid fa-circle-info"style="padding-right: 5px;"></i>About Us</a></li>
                   <li><a href="#note-editor" class="link"><i  class="fas fa-edit" style="padding-right: 5px;"></i>Editing</a></li>
                   <li><a href="#sortednotes" class="link"> <i class="fa-solid fa-note-sticky" style="padding-right: 5px;"></i>Notes</a></li>
               </ul>
           </div>

            <!--support-->
            <div class="sec quicklinks">
               <h2>Support</h2>
               <ul>
                   <li><a href="#">Terms & Conditions</a></li>
                   <li><a href="#">Privacy Policy</a></li>
                   <li><a href="#">FAQ</a></li>
               </ul>
           </div>
           <!--contact-->
           <div class="sec contact">
               <h2>Contact</h2>
               <ul class="info">
                   <li class="location">
                       <span><a><i class="fa-solid fa-location-dot"></i></span>India</a></li>
                   <li class="call"><span><a><i class="fa-solid fa-phone"></i></span><a href="tel:+12345678900">+12345678900</a></li>
                   <li class="mail"><span><a><i class="fa-solid fa-envelope" ></i></span><a href="mailto:whitepaper@email.com">whitepaper@email.com</a></li>
               </ul>
           </div>
       </div>
         </div>
       </div>

        <p class="footer">&copy; <span id="currentYear"></span> Whitepaper. All rights reserved.</p>
    </footer>

    <script>
        // Theme Toggle Functionality
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const htmlElement = document.documentElement;

        // Check for saved theme preference or system preference
        const savedTheme = localStorage.getItem('darkMode');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)');

        function setTheme(theme) {
            if (theme === 'true') {
                htmlElement.classList.add('dark-theme');
                themeIcon.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('darkMode', 'true');
            } else {
                htmlElement.classList.remove('dark-theme');
                themeIcon.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('darkMode', 'false');
            }
        }

        // Initial theme setup
        if (savedTheme === 'true') {
            setTheme('true');
        } else if (savedTheme === 'false') {
            setTheme('false');
        } else if (systemPrefersDark.matches) {
            setTheme('true');
        }

        // Theme toggle event listener
        themeToggle.addEventListener('click', () => {
            const currentTheme = htmlElement.classList.contains('dark-theme') ? 'true' : 'false';
            setTheme(currentTheme === 'false' ? 'true' : 'false');
        });

        // Rest of your existing JavaScript
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);

            toast.style.display = 'block';
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        document.addEventListener("DOMContentLoaded", function() {
            const emailForm = document.getElementById("email-form");
            const otpSection = document.getElementById("otp-section");
            const otpForm = document.getElementById("otp-form");

            emailForm.addEventListener("submit", async function(event) {
                event.preventDefault();
                
                try {
                    let formData = new FormData(emailForm);
                    let response = await fetch("", {
                        method: "POST",
                        body: formData
                    });

                    let result = await response.json();

                    if (response.ok) {
                        showToast(result.message, 'success');
                        otpSection.style.display = "block";
                    } else {
                        showToast(result.error, 'error');
                    }
                } catch (error) {
                    showToast("An error occurred. Please try again.", 'error');
                }
            });

            otpForm.addEventListener("submit", async function(event) {
                event.preventDefault();
                
                try {
                    let formData = new FormData(otpForm);
                    let response = await fetch("/verify-otp/", {
                        method: "POST",
                        body: formData
                    });

                    let result = await response.json();

                    if (response.ok) {
                        showToast(result.message, 'success');
                        setTimeout(() => {
                            window.location.href = result.redirect;
                        }, 2000);
                    } else {
                        showToast(result.error, 'error');
                    }
                } catch (error) {
                    showToast("An error occurred. Please try again.", 'error');
                }
            });
        });
    </script>
</body>
</html>